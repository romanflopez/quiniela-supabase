â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ”¤ PRUEBA RÃPIDA - SCRAPER DE CIUDAD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš¡ EJECUTA ESTO AHORA MISMO PARA VERIFICAR QUE CIUDAD FUNCIONA

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ“‹ PASOS RÃPIDOS (5 minutos)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Abrir PowerShell o CMD en esta carpeta

2. Ejecutar:
   cd scripts
   run-scraper-ciudad.cmd

3. VerÃ¡s algo como:
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ”¤ SCRAPER DEDICADO PARA CIUDAD (con Letras)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   
   ğŸ“… Fecha: 2024-12-13
   ğŸ¯ Sorteo inicial: 51800
   ğŸ”„ MÃ¡ximo de intentos: 10
   
   â”â”â” Intento 1/10 - Sorteo 51800
   ğŸ” Scrapeando Ciudad sorteo 51800...
   â³ Ciudad - Intento 1/5
   âœ… Ciudad - Sorteo 51800 OK (20 nÃºmeros, 20 letras)
   ğŸ’¾ Guardando en base de datos...
   âœ… Â¡Sorteo guardado exitosamente en la BD!
   
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   âœ… Ã‰XITO - Scraping de Ciudad completado
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

4. Si funciona, verÃ¡s âœ… verde

5. Si falla, verÃ¡s âŒ rojo (normal para Ciudad, intentar de nuevo)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   âœ… SI FUNCIONA LOCALMENTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Significa que:
â€¢ El scraper de Ciudad estÃ¡ bien programado âœ…
â€¢ La conexiÃ³n a la base de datos funciona âœ…
â€¢ La API de LOTBA responde âœ…
â€¢ Los workflows de GitHub tambiÃ©n funcionarÃ¡n âœ…

Los workflows se ejecutarÃ¡n automÃ¡ticamente:
â€¢ Ciudad: Cada 3 horas (00:00, 03:00, 06:00, etc. UTC)
â€¢ Otros: En su horario programado

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   âš ï¸ SI FALLA LOCALMENTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Errores comunes:

1. "Cannot find module @supabase/supabase-js"
   SoluciÃ³n: cd scripts && npm install

2. "DATABASE_URL is not defined"
   SoluciÃ³n: Crear archivo scripts/.env con:
   DATABASE_URL=postgresql://postgres:...

3. "No se encontraron sorteos vÃ¡lidos"
   SoluciÃ³n: Normal para Ciudad, es problemÃ¡tico
   â€¢ Cambiar el sorteoInicial a uno mÃ¡s reciente
   â€¢ O ejecutar: node scraper-ciudad.js 51850
   â€¢ O simplemente esperar los workflows automÃ¡ticos

4. "Ciudad - FallÃ³ despuÃ©s de 5 intentos"
   SoluciÃ³n: Normal, API de Ciudad es inestable
   â€¢ Intentar mÃ¡s tarde
   â€¢ Los workflows automÃ¡ticos seguirÃ¡n intentando

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ¯ VERIFICAR EN LA BASE DE DATOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DespuÃ©s de ejecutar exitosamente:

1. Ir a Supabase Dashboard
2. Table Editor â†’ quiniela_resultados
3. DeberÃ­as ver un nuevo registro:
   â€¢ jurisdiccion: "Ciudad"
   â€¢ 20 nÃºmeros
   â€¢ 20 letras
   â€¢ Cabeza: primer nÃºmero
   â€¢ Fecha de hoy

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸŒ VERIFICAR EN EL FRONTEND
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Abrir index.html en el navegador
2. Seleccionar "Ciudad" en el filtro de jurisdicciÃ³n
3. DeberÃ­as ver el sorteo que acabas de scrapear
4. Con sus 20 letras destacadas en morado

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ’¡ PRÃ“XIMOS PASOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Una vez que funcione localmente:

1. âœ… Los workflows de GitHub Actions estÃ¡n configurados
2. âœ… Se ejecutarÃ¡n automÃ¡ticamente en sus horarios
3. âœ… No necesitas hacer nada mÃ¡s

Para ejecutar workflows manualmente en GitHub (opcional):
1. Ir a: https://github.com/romanflopez/quiniela-supabase/actions
2. Iniciar sesiÃ³n
3. Click en cualquier workflow
4. Click en "Run workflow"
5. Click nuevamente en "Run workflow" (verde)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ğŸ“Š RESUMEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… HECHO:
â€¢ Scraper de Ciudad programado
â€¢ Tests pasando (32/32)
â€¢ Workflows configurados en GitHub
â€¢ Frontend actualizado

ğŸ”„ AHORA:
â€¢ Ejecutar localmente para verificar: run-scraper-ciudad.cmd
â€¢ Esperar a que los workflows se ejecuten automÃ¡ticamente

â° PRÃ“XIMA EJECUCIÃ“N AUTOMÃTICA DE CIUDAD:
â€¢ Cada 3 horas en punto (UTC)
â€¢ PrÃ³xima: 00:00, 03:00, 06:00, 09:00, 12:00, 15:00, 18:00, 21:00

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

